/*
 * @Author: chenzhongsheng
 * @Date: 2022-11-21 19:53:46
 * @Description: Coding something
 * @LastEditors: chenzhongsheng
 * @LastEditTime: 2022-12-01 10:23:49
 */
var WebosTerm=function(R){"use strict";function S(){S=function(){return a};var a={},t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i,o,a,u,e=e&&e.prototype instanceof f?e:f,e=Object.create(e.prototype),r=new w(r||[]);return e._invoke=(i=t,o=n,a=r,u="suspendedStart",function(t,e){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return l;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}r=s(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,l;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,l):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,l)}(n,a);if(n){if(n===l)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===u)throw u="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);u="executing";n=s(i,o,a);if("normal"===n.type){if(u=a.done?"completed":"suspendedYield",n.arg===l)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(u="completed",a.method="throw",a.arg=n.arg)}}),e}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=u;var l={};function f(){}function h(){}function p(){}var e={},d=(o(e,r,function(){return this}),Object.getPrototypeOf),d=d&&d(d(x([]))),v=(d&&d!==t&&c.call(d,r)&&(e=d),p.prototype=f.prototype=Object.create(e));function m(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function y(a,u){var e;this._invoke=function(n,r){function t(){return new u(function(t,e){!function e(t,n,r,i){var o,t=s(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&c.call(n,"__await")?u.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):u.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function g(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function x(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(v,"constructor",h.prototype=p),o(p,"constructor",h),h.displayName=o(p,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},a.awrap=function(t){return{__await:t}},m(y.prototype),o(y.prototype,n,function(){return this}),a.AsyncIterator=y,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new y(u(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},m(v),o(v,i,"Generator"),o(v,r,function(){return this}),o(v,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=x,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(g),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),u=c.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),g(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,g(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},a}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&F(t.prototype,e),n&&F(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){return(z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function M(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return M(t)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=B(n);return U(this,r?(t=B(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function q(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){u=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(t,e)||J(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||J(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function t(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;0<=u;u--)(i=t[u])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);3<o&&a&&Object.defineProperty(e,n,a)}function d(t,a,u,c){return new(u=u||Promise)(function(n,e){function r(t){try{o(c.next(t))}catch(t){e(t)}}function i(t){try{o(c.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,i)}o((c=c.apply(t,a||[])).next())})}function H(t){for(var e,n=0,r=0;r<t.length;r++)(e=t.charCodeAt(r))<127?n+=1:128<=e&&e<=2047?n+=2:2048<=e&&e<=65535&&(n+=3);return n}function $(){return Date.now().toString().substring(3)+(e=999999,(t=1e5)+Math.round(Math.random()*(e-t)));var t,e}var G=new Map;function V(t){var i,e=G.get(t);return e||(i=t,G.set(t,e=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return new Promise(function(e,n){i.apply(void 0,r.concat([function(t){e(t)},function(t){n(t),console.error(t)}]))})})),e}var e={exports:{}},Q=(!function(t,e){var h;self.URL=self.URL||self.webkitURL,self.requestFileSystem=self.requestFileSystem||self.webkitRequestFileSystem,self.resolveLocalFileSystemURL=self.resolveLocalFileSystemURL||self.webkitResolveLocalFileSystemURL,navigator.temporaryStorage=navigator.temporaryStorage||navigator.webkitTemporaryStorage,navigator.persistentStorage=navigator.persistentStorage||navigator.webkitPersistentStorage,self.BlobBuilder=self.BlobBuilder||self.MozBlobBuilder||self.WebKitBlobBuilder,void 0===self.FileError&&((h=function(){}).prototype.prototype=Error.prototype);function p(t){this.prototype=h.prototype,this.code=t.code,this.name=t.name}var d=function(t){return Array.prototype.slice.call(t||[],0)},n=(h.BROWSER_NOT_SUPPORTED=1e3,h.prototype.__defineGetter__("name",function(){for(var t,e=Object.keys(h),n=0;t=e[n];++n)if(h[t]==this.code)return t;return"Unknown Error"}),new function(){function n(t){return 0==t.indexOf(e)}function a(t){return t=n(t)?t:"/"==t[0]?l.root.toURL()+t.substring(1):0!=t.indexOf("./")&&0!=t.indexOf("../")||"../"==t&&f!=l.root?f.toURL()+"/"+t:f.toURL()+t}function c(n,t){function r(t){throw t.code==h.NOT_FOUND_ERR?o?new Error('"'+e+'" or "'+o+'" does not exist.'):new Error('"'+e+'" does not exist.'):new Error("Problem getting Entry for one or more paths.")}var i,e=t,o=arguments[2],t=a(e);3==arguments.length?(i=a(o),self.resolveLocalFileSystemURL(t,function(e){self.resolveLocalFileSystemURL(i,function(t){n(e,t)},r)},r)):self.resolveLocalFileSystemURL(t,n,r)}function o(t,e,n,r,i,o){if(!l)throw new Error(s);if(v(t)!=v(e))throw new Error("These method arguments are not supported.");var a=n||null,u=null!=o&&o;(t.isFile||e.isDirectory)&&e.isDirectory?u?t.moveTo(e,a,r,i):t.copyTo(e,a,r,i):c(function(t,e){if(!e.isDirectory){var n=new Error('Oops! "'+e.name+" is not a directory!");if(i)return void i(n);throw n}u?t.moveTo(e,a,r,i):t.copyTo(e,a,r,i)},t,e)}var s="Filesystem has not been initialized.",e="filesystem:",l=null,f=null,u=!1;function t(t){(l=t||null)&&(f=l.root,u=!0)}return t.DEFAULT_FS_SIZE=1048576,t.version="0.4.3",(t.prototype={get fs(){return l},get isOpen(){return u},get cwd(){return f}}).pathToFilesystemURL=a,t.prototype.init=function(t,e,n){if(!self.requestFileSystem)throw new p({code:h.BROWSER_NOT_SUPPORTED,name:"BROWSER_NOT_SUPPORTED"});function r(t){this.size=i,f=(l=t).root,u=!0,e&&e(t)}var t=t||{},i=t.size||1048576;this.type=self.TEMPORARY,"persistent"in t&&t.persistent&&(this.type=self.PERSISTENT);this.type==self.PERSISTENT&&navigator.persistentStorage?navigator.persistentStorage.requestQuota(i,function(t){self.requestFileSystem(this.type,t,r.bind(this),n)}.bind(this),n):self.requestFileSystem(this.type,i,r.bind(this),n)},t.prototype.ls=function(t,i,o){if(!l)throw new Error(s);function e(t){var n=[],r=(f=t).createReader();(function e(){r.readEntries(function(t){t.length?(n=n.concat(d(t)),e()):(n.sort(function(t,e){return t.name<e.name?-1:e.name<t.name?1:0}),i(n))},o)})()}t.isDirectory?e(t):n(t)?c(e,t):f.getDirectory(t,{},e,o)},t.prototype.mkdir=function(r,t,i,o){if(!l)throw new Error(s);var a=null!=t&&t,u=r.split("/");(function e(t,n){"."!=n[0]&&""!=n[0]||(n=n.slice(1)),t.getDirectory(n[0],{create:!0,exclusive:a},function(t){if(t.isDirectory)n.length&&1!=u.length?e(t,n.slice(1)):i&&i(t);else{t=new Error(r+" is not a directory");if(!o)throw t;o(t)}},function(t){if(t.code==h.INVALID_MODIFICATION_ERR){if(t.message="'"+r+"' already exists",!o)throw t;o(t)}})})(f,u)},t.prototype.open=function(t,e,n){if(!l)throw new Error(s);t.isFile?t.file(e,n):c(function(t){t.file(e,n)},a(t))},t.prototype.create=function(e,t,n,r){if(!l)throw new Error(s);f.getFile(e,{create:!0,exclusive:null==t||t},n,function(t){if(t.code==h.INVALID_MODIFICATION_ERR&&(t.message="'"+e+"' already exists"),!r)throw t;r(t)})},t.prototype.mv=function(t,e,n,r,i){o.bind(this,t,e,n,r,i,!0)()},t.prototype.rm=function(t,e,n){if(!l)throw new Error(s);function r(t){t.isFile?t.remove(e,n):t.isDirectory&&t.removeRecursively(e,n)}t.isFile||t.isDirectory?r(t):c(r,t)},t.prototype.cd=function(t,e,n){if(!l)throw new Error(s);t.isDirectory?(f=t,e&&e(f)):(t=a(t),c(function(t){if(t.isDirectory)f=t,e&&e(f);else{t=new Error("Path was not a directory.");if(!n)throw t;n(t)}},t))},t.prototype.cp=function(t,e,n,r,i){o.bind(this,t,e,n,r,i)()},t.prototype.write=function(t,i,o,a){if(!l)throw new Error(s);function e(r){r.createWriter(function(t){t.onerror=a,i.append?(t.onwriteend=function(t){o&&o(r,this)},t.seek(t.length)):(e=!1,t.onwriteend=function(t){if(!e)return e=!0,void this.truncate(this.position);o&&o(r,this)}),i.data.__proto__==ArrayBuffer.prototype&&(i.data=new Uint8Array(i.data));var e,n=new Blob([i.data],i.type?{type:i.type}:{});t.write(n)},a)}t.isFile?e(t):n(t)?c(e,t):f.getFile(t,{create:!0,exclusive:!1},e,a)},t.prototype.df=function(n,t){function e(t,e){n(t,e-t,e)}if(!navigator.temporaryStorage.queryUsageAndQuota||!navigator.persistentStorage.queryUsageAndQuota)throw new Error("Not implemented.");self.TEMPORARY==this.type?navigator.temporaryStorage.queryUsageAndQuota(e,t):self.PERSISTENT==this.type&&navigator.persistentStorage.queryUsageAndQuota(e,t)},t});t.exports&&(t.exports=n),e.Filer=n}(e,e.exports),e.exports),Y=function(){function e(t){a(this,e),this.filer=t}return u(e,[{key:"read",value:function(t){var n=t.path,t=t.mimetype,r=void 0===t?"text/plain":t;return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(this.filer.open)(n);case 2:return e=t.sent,t.next=5,function(n,t){var r=1<arguments.length&&void 0!==t?t:"text/plain";return new Promise(function(e){var t=new FileReader;t.onload=function(t){e((null==(t=t.target)?void 0:t.result)||null)},"text/plain"===r?t.readAsText(n):t.readAsArrayBuffer(n)})}(e,r);case 5:return e=t.sent,t.abrupt("return",e);case 7:case"end":return t.stop()}},t,this)}))}},{key:"write",value:function(t){var e=t.path,n=t.content,r=void 0===n?"":n,n=t.mimetype,i=void 0===n?"text/plain":n,n=t.append,o=void 0!==n&&n;return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return null===r?r="null":"[object Object]"===r.toString()&&(r=JSON.stringify(r)),t.prev=1,t.next=4,V(this.filer.write)(e,{data:r,type:i,append:o});case 4:return t.abrupt("return",t.sent);case 7:throw t.prev=7,t.t0=t.catch(1),console.error(t.t0),new Error("Write failed: "+e);case 11:case"end":return t.stop()}},t,this,[[1,7]])}))}}]),e}(),K=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.persistent,e=void 0!==e&&e,n=t.size,n=void 0===n?1048576:n,r=t.onready;if(a(this,i),i.instance)return i.instance;this.filer=new Q,this.reader=new Y(this.filer),window.filer=this.filer,this.filer.init({persistent:e,size:n},function(){r&&r()},function(t){console.error(t)}),i.instance=this}return u(i,[{key:"initFiles",value:function(r){return d(this,void 0,void 0,S().mark(function t(){var n=this;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(e){n._traverseDir({path:r.path.path||"/",parent:r},function(t){e(t)})}));case 1:case"end":return t.stop()}},t)}))}},{key:"createFile",value:function(t){return V(this.filer.create)(t,!0)}},{key:"mkdir",value:function(o){var a=this;return new Promise(function(e,t){var n=o.lastIndexOf("/"),r=o.substring(0,n)||"/",i=o.substring(n+1);a.cd(r).then(function(){a.filer.mkdir(i,!0,function(t){e(t)},function(){t()})})})}},{key:"cd",value:function(t){return V(this.filer.cd)(t)}},{key:"rm",value:function(t){return V(this.filer.rm.bind(this.filer))(t)}},{key:"_traverseDir",value:function(t,r){var i=t.path,c=t.parent;return d(this,void 0,void 0,S().mark(function t(){var e,a,u,n=this;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,V(this.filer.ls)(i);case 3:if(e=t.sent,a=[],u=function(t,e){var n=0;return function(){t<=++n&&e()}}(e.length,function(){r&&r(a)}),0===e.length)return r&&r(a),t.abrupt("return");t.next=9;break;case 9:e.forEach(function(o){return d(n,void 0,void 0,S().mark(function t(){var e,n,r,i;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.isDirectory,n=o.name,e)return t.next=4,c.createDir({name:n,entry:o},{fromInit:!0});t.next=12;break;case 4:if(r=t.sent){t.next=8;break}return u(),t.abrupt("return");case 8:a.push(r),this._traverseDir({path:o.fullPath,parent:r},u),t.next=20;break;case 12:return t.next=14,c.createFile({name:n,entry:o},{fromInit:!0});case 14:if(i=t.sent){t.next=18;break}return u(),t.abrupt("return");case 18:a.push(i),u();case 20:case"end":return t.stop()}},t,this)}))});case 10:case"end":return t.stop()}},t,this)}))}}]),i}();function X(){return K.instance}window._fs=X;function n(e,t,n){var r=n.get,i="_"+t;e.__cache_keys||(e.__cache_keys=[],e.__clear_cache=function(){e.__cache_keys.forEach(function(t){e[t]=void 0})}),e.__cache_keys.push(i),n.get=function(){return void 0===this[i]&&(this[i]=null==r?void 0:r.call(this)),this[i]}}var Z=function(){function n(t){var e=t.name,e=void 0===e?"":e,t=t.entry,t=void 0===t?null:t;a(this,n),this.isDisk=!1,this.isDir=!1,this._size=-1,this.loadedCallback=[],this.id=$(),this.entry=t,this.name=e}return u(n,[{key:"size",get:function(){return this._size<0&&(this._size=this.countSize()),this._size}},{key:"triggerLoaded",value:function(){this.loadedCallback.forEach(function(t){t()}),this.loadedCallback=[]}},{key:"onloaded",value:function(){var e=this;return new Promise(function(t){e.loadedCallback.push(function(){t(!0)})})}},{key:"setEntry",value:function(t){this.entry=t,this.triggerLoaded()}},{key:"setParent",value:function(t){(this.parent=t)&&(this.path=t.path.join(this.name))}},{key:"remove",value:function(){return d(this,void 0,void 0,S().mark(function t(){var e,n,r=this;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.parent){t.next=2;break}return t.abrupt("return",!1);case 2:if(e=this.parent.children,-1===(n=e.findIndex(function(t){return t===r})))return console.warn("文件未找到"),t.abrupt("return",!1);t.next=7;break;case 7:return e.splice(n,1),this.markParentClearSize(),t.abrupt("return",X().rm(this.path.path));case 10:case"end":return t.stop()}},t,this)}))}},{key:"markParentClearSize",value:function(){for(var t=this.parent;t;)t._size=-1,t=t.parent}}]),n}(),tt=function(){function t(){a(this,t)}return u(t,[{key:"parse",value:function(t){return t}},{key:"parseWrite",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}(),e=function(){c(e,tt);var t=s(e);function e(){return a(this,e),t.apply(this,arguments)}return u(e,[{key:"parse",value:function(t){if("object"===v(t))return t;try{return JSON.parse(t)}catch(t){return null}}},{key:"parseWrite",value:function(t){return"object"===v(t)?JSON.stringify(t):t}},{key:"merge",value:function(t,e){return Object.assign(t,e)}}]),e}(),r=function(){c(e,tt);var t=s(e);function e(){return a(this,e),t.apply(this,arguments)}return u(e,[{key:"parse",value:function(t){return t}},{key:"parseWrite",value:function(t){return t}},{key:"merge",value:function(t,e){return t+e}}]),e}(),et={txt:"text",json:"json",js:"javascript"},nt={json:e,text:r,javascript:r,unknown:r},rt=function(){function e(t){a(this,e),this.fileType="unknown",this.suffix="",this.file=t,this.geneSuffix(),this.parser=new nt[this.fileType]}return u(e,[{key:"parseRead",value:function(t){return this.parser.parse(t)}},{key:"parseWrite",value:function(){return this.parser.parseWrite(this.file.content)}},{key:"merge",value:function(t){return this.parser.merge(this.file.content,t)}},{key:"geneSuffix",value:function(){var t=this.file,e=t.name,t=t.mimetype,n=e.lastIndexOf(".");-1!==n?(this.suffix=e.substring(n+1),this.fileType=et[this.suffix]||""):"text/plain"===t&&(this.fileType="text")}}]),e}(),it=function(){c(o,Z);var i=s(o);function o(t){var e=t.name,n=t.content,n=void 0===n?"":n,r=t.entry,t=t.mimetype,t=void 0===t?"text/plain":t;return a(this,o),(e=i.call(this,{name:e,entry:r})).mimetype=t,e.type="file",e.content=n,e.fileParser=new rt(M(e)),e}return u(o,[{key:"contentString",get:function(){return"string"==typeof this.content?this.content:JSON.stringify(this.content,null,4)}},{key:"countSize",value:function(){var t=0;return"string"==typeof this.content?t=H(this.content):null===this.content?t=0:this.content instanceof ArrayBuffer?t=this.content.byteLength:"object"===v(this.content)&&(t=H(JSON.stringify(this.content))),t/1024}},{key:"copy",value:function(){return new o({name:this.name,content:this.content})}},{key:"read",value:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).refresh,e=void 0!==t&&t;return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e)return t.t0=this.fileParser,t.next=4,X().reader.read({path:this.path.path,mimetype:this.mimetype});t.next=6;break;case 4:t.t1=t.sent,this.content=t.t0.parseRead.call(t.t0,t.t1);case 6:return t.abrupt("return",this.content);case 7:case"end":return t.stop()}},t,this)}))}},{key:"write",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.content,t=t.append,n=void 0!==t&&t;return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e?e=this.content:this.content=n?this.fileParser.merge(e):e,t.next=3,X().reader.write({path:this.path.path,content:this.fileParser.parseWrite(),append:!1});case 3:case"end":return t.stop()}},t,this)}))}}]),o}(),m=function(){function s(t){a(this,s),this.setPath(t)}return u(s,[{key:"relative",get:function(){return this.isRoot?this.path.substring(1):this.path}},{key:"isRoot",get:function(){return""===this.array[0]}},{key:"isEndWithSplit",get:function(){return""===this.last}},{key:"array",get:function(){return this.path?s.handleArray(this.path.split(s.Split)):[]}},{key:"last",get:function(){var t=this.array[this.array.length-1];return t!==s.Back&&t||""}},{key:"isLastReverse",get:function(){return 0!==this.array.length&&(this.last===s.Back||""===this.last&&this.array[this.array.length-2]===s.Back)}},{key:"parentPath",get:function(){if(0===this.array.length)return s.Back;if(1===this.array.length)return(t=this.array[0])===s.Back?"".concat(t).concat(s.Split).concat(s.Back):s.Back;var t=(this.isLastReverse?[].concat(l(this.array),[s.Back]):this.array.slice(0,this.array.length-1)).join(s.Split);return this.isRoot&&!t?"".concat(s.Split).concat(t):t}},{key:"setPath",value:function(t){this.path=s.handle(t),this.__clear_cache()}},{key:"join",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s.from(s.join.apply(s,[this.path].concat(e)))}},{key:"append",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.setPath(s.join.apply(s,[this.path].concat(e))),this}}],[{key:"handle",value:function(t){t=Array.isArray(t)?t.filter(function(t){return!!t}).join(s.Split):t.trim();return t.substring(t.length-3)===s.Back+s.Split?t.substring(0,t.length-1):t}},{key:"join",value:function(){for(var t=[],e=!1,n=0;n<arguments.length;n++){var r=s.handle(n<0||arguments.length<=n?void 0:arguments[n]);r&&(""===(r=r.split(s.Split))[0]?(t=r,e=e||!0):t.push.apply(t,l(r)))}for(var i=[],o=[],a=0;a<t.length;a++){var u=t[a];"."!==u&&(u?u===s.Back?(0===i.length?e||o.push(u):i.pop(),a===t.length-1&&i.push("")):i.push(u):0!==a&&a!==t.length-1||i.push(u))}var c=o.concat(i).join(s.Split);return c=e&&c[0]!==s.Split?s.Split+c:c}},{key:"from",value:function(t){return new s(t)}},{key:"handleArray",value:function(t){var n=t.length;return t.filter(function(t,e){return 0===e||e===n-1||""!==t})}}]),s}(),ot=(m.Split="/",m.Back="..",t([n],m.prototype,"relative",null),t([n],m.prototype,"isRoot",null),t([n],m.prototype,"isEndWithSplit",null),t([n],m.prototype,"array",null),t([n],m.prototype,"last",null),t([n],m.prototype,"isLastReverse",null),t([n],m.prototype,"parentPath",null),window.Path=m,function(){c(i,Z);var r=s(i);function i(t){var e=t.name,n=t.children,n=void 0===n?[]:n,t=t.entry;return a(this,i),(e=r.call(this,{name:e,entry:t})).children=[],e.type="dir",e.isDir=!0,e.children=n,e}return u(i,[{key:"countSize",value:function(){var e=0;return this.children.forEach(function(t){e+=t.countSize()}),e}},{key:"addChild",value:function(n){var r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.setParent(this),this.children.push(n),r){t.next=11;break}return e=n.path.path,t.next=6,X()[n.isDir?"mkdir":"createFile"](e);case 6:if(e=t.sent,n.setEntry(e),n.isDir){t.next=11;break}return t.next=11,n.write();case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}},t,this)}))}},{key:"createFile",value:function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{returnIfExists:!1,fromInit:!1},r=t.returnIfExists,i=t.fromInit;return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.name,!this.exists(n.name)){t.next=8;break}if(r)return t.next=5,this.findFileByPath(n.name);t.next=6;break;case 5:return t.abrupt("return",t.sent);case 6:return t.abrupt("return",null);case 8:return t.next=10,this.addChild(new it(n),i);case 10:if(e=t.sent,i)return t.next=14,e.read({refresh:!0});t.next=14;break;case 14:return t.abrupt("return",e);case 15:case"end":return t.stop()}},t,this)}))}},{key:"createChildByPath",value:function(i,o){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return d(this,void 0,void 0,S().mark(function t(){var e,n,r;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=function(t,e,n){return e=1<arguments.length&&void 0!==e?e:"/",-1!==(n=2<arguments.length&&void 0!==n&&n?t.lastIndexOf(e):t.indexOf(e))&&e?[t.substring(0,n),t.substring(n+1)]:[t,""]}(i),n=p(n,2),e=n[0],!(n=n[1])){t.next=10;break}if(e){t.next=6;break}return t.abrupt("return",at.instance.createChildByPath(n,o,a));case 6:return t.next=8,this.createDir({name:e},{returnIfExists:!0});case 8:return r=t.sent,t.abrupt("return",(null==r?void 0:r.createChildByPath(n,o,a))||null);case 10:if(o)return t.abrupt("return",this.createDir({name:e},{returnIfExists:a}));t.next=12;break;case 12:return t.abrupt("return",this.createFile({name:e},{returnIfExists:a}));case 13:case"end":return t.stop()}},t,this)}))}},{key:"createDir",value:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{returnIfExists:!1,fromInit:!1};return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.name,!this.exists(e.name)){t.next=8;break}if(n.returnIfExists)return t.next=5,this.findDirByPath(e.name);t.next=6;break;case 5:return t.abrupt("return",t.sent);case 6:return"".concat(this.path.path,"/").concat(e.name),t.abrupt("return",null);case 8:return t.abrupt("return",this.addChild(new i(e),n.fromInit));case 9:case"end":return t.stop()}},t,this)}))}},{key:"exists",value:function(e){return!!this.children.find(function(t){return t.name===e})}},{key:"copy",value:function(){var t=this.children.map(function(t){return t.copy()});return new i({name:this.name,children:t})}},{key:"paste",value:function(t){this.children.push(t)}},{key:"findChildByPath",value:function(i){return d(this,void 0,void 0,S().mark(function t(){var e,n,r;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((e=m.from(i)).isRoot)return t.abrupt("return",at.instance.findChildByPath(e.relative));t.next=3;break;case 3:if(this.entry){t.next=6;break}return t.next=6,this.onloaded();case 6:if(0===e.array.length)return t.abrupt("return",this);t.next=8;break;case 8:if((n=e.array.shift())===m.Back)return t.abrupt("return",(this.parent||this).findChildByPath(e.array));t.next=11;break;case 11:if(r=this.children.find(function(t){return t.name===n})){t.next=14;break}return t.abrupt("return",null);case 14:if(r.isDir)return t.abrupt("return",r.findChildByPath(e.array));t.next=16;break;case 16:return t.abrupt("return",r);case 17:case"end":return t.stop()}},t,this)}))}},{key:"filerChild",value:function(t){for(var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=[],r=this.children.length,i=0;i<r;i++){var o=this.children[i];-1!==o.name.indexOf(t)&&n.push(o),e&&o.isDir&&n.push.apply(n,l(o.filerChild(t,e)))}return n}},{key:"findFileByPath",value:function(n){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.findChildByPath(n);case 2:if(!(e=t.sent)||e.isDir)return console.warn("目标不存在 或是一个文件夹而不是文件"),t.abrupt("return",null);t.next=6;break;case 6:return t.abrupt("return",e);case 7:case"end":return t.stop()}},t,this)}))}},{key:"findDirByPath",value:function(n){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.findChildByPath(n);case 2:if(null!=(e=t.sent)&&e.isDir){t.next=6;break}return console.warn("目标不存在 或是一个文件而不是文件夹"),t.abrupt("return",null);case 6:return t.abrupt("return",e);case 7:case"end":return t.stop()}},t,this)}))}},{key:"ls",value:function(){return this.children.map(function(t){return t.name})}},{key:"lsDetail",value:function(){return this.children.map(function(t){return{name:t.name,isDir:t.isDir,_size:t._size,path:t.path,id:t.id,fileType:t.fileType}})}},{key:"deepLs",value:function(){var e={};return this.children.forEach(function(t){t.isDir?e[t.name]=t.deepLs():e[t.name]=t.name}),e}}]),i}()),at=function(){c(r,ot);var n=s(r);function r(){var t,e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).capacity,e=void 0===e?1024:e;return a(this,r),r.instance?U(t,r.instance):((t=n.call(this,{name:"disk"})).isDisk=!0,t.entry="DISK",t.type="disk",t.capacity=e,t.parent=null,t.path=new m("/"),r.instance=M(t),t)}return u(r,[{key:"initFileSystem",value:function(){return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;var n=this;return new Promise(function(e){new K({onready:function(){X().initFiles(n).then(function(t){e(t)})}})});case 2:this.children=t.sent;case 3:case"end":return t.stop()}},t,this)}))}},{key:"clear",value:function(){for(var t=this.children.length-1;0<=t;t--)this.children[t].remove()}}]),r}();function ut(t,e){for(var n="",r=0;r<t.length-1;r++)n+="".concat(t[r]).concat("function"==typeof e?e(r):e[r]);return n+t[t.length-1]}function ct(t){return t instanceof Array&&t.raw instanceof Array}function st(t,e){return-1===(e=t.indexOf(e))?[t,""]:[t.substring(0,e).trim(),t.substring(e+1).trim()]}var y=Symbol("sub"),lt=Symbol("fu"),ft=Symbol("i"),ht=Symbol("v"),pt=Symbol("rv"),dt=Symbol("l"),E=Symbol("j"),vt=Symbol("rpv");function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function yt(t){return function(t){if(Array.isArray(t))return bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gt=/\$\$\d+\$\$/,wt=/\$\$\d+\$\$/g,xt=[],kt={};function St(t){if(xt[t])return xt[t];var e="$$".concat(t,"$$");return xt[t]=e,kt[e]=t,e}function Et(t){return kt[t]||parseInt(t.replace(/\$\$/g,""))}function jt(t){return(t=t.match(wt))||null}function Ot(t,e){var n=1<arguments.length&&void 0!==e?e:0;return ut(t,function(t){return St(t+n)})}function f(t,e,r,n){var i=3<arguments.length&&void 0!==n&&n,n=t instanceof Array;if(0<e.length){var o,a,u=n?function(t){if(t<=0)return[];for(var e=[],n=0;n<t;n++)e.push(St(n));return e}(e.length):jt(t);if(u)return o=n?t:t.split(gt),a=u.map(function(t,n){return t=Et(t),g(e[t])[y](function(t){var e=i?ut(o,a):"",t=(a[n]=t,ut(o,a));r(t,e)})}),ut(o,a)}return n?t.join(""):t}var b={add:null},Ct=function(t){var e,n,r,i,o=(a="function"==typeof t)?t:t.get,a=a?null:t.set,u=[],t=(b.add=function(t){u.push(t)},o()),c=(b.add=null,e=o,n=a,r=t,i=[],h(o={type:"reaction",isUndefined:function(){return void 0===r},get value(){var t;return null!=(t=b.add)&&t.call(b,this),r=e()},set value(t){n?n(t,this.value):console.warn("对只读computed设置值无效")}},vt,function(t){t!==r&&n&&n(t,r)}),h(o,y,function(t){return i.push(t),r}),h(o,lt,function(){var e=r,n=this.value;i.forEach(function(t){t(n,e)})}),h(o,pt,Lt(r)),h(o,dt,function(){return i}),h(o,"toJSON",function(){return r}),o);return u.forEach(function(r){return r[y](function(t,e,n){r[vt](t),c[lt](e,n)})}),c};function At(t,e){var n,e=1<arguments.length&&void 0!==e?e:"computed";return t.isEmpty()?null:(n=t.exe({type:e}),Ct(function(){return It(n)}))}function Nt(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],k=t;if("object"===mt(k))for(var e in Array.isArray(k)&&(k._length=Pt(k.length)),k){if("toJSON"===e)break;k[e]=zt(k[e])}function S(t,e,n){for(var r=0;r<i.length;r++)i[r](t,e,n)}return Object.assign(k,(h(t={},y,function(t){return i.push(t),k}),h(t,lt,function(){S(k,0<arguments.length&&void 0!==arguments[0]?arguments[0]:k,1<arguments.length?arguments[1]:void 0)}),h(t,pt,!1),h(t,dt,function(){return i}),h(t,E,function(){return Bt(k)}),t)),new Proxy(k,{get:function(t,e,n){var r;if(e===ht)return Bt(k);var i=mt(k[e]);return Array.isArray(t)?"length"===e&&null!=(r=b.add)&&r.call(b,k._length):"length"!==e&&"function"!==i||"undefined"===i&&"toJSON"!==e&&(k[e]=Dt("",!0)),Reflect.get(t,e,n)},set:function(t,e,n,r){function i(){return a&&!u&&/^\d+$/.test(e)?parseInt(e):-1}function o(){return Reflect.set(t,e,n,r)}var a=t instanceof Array,u="symbol"===mt(e);if(a){if("length"===e)return k._length.value=n,o();if(-1!==(s=t.indexOf(n)))return c=i(),S(n,t[c],c),t[s]=void 0,o()}if(u){if(e!==ht)return e===E?(console.warn("json symbol 属性不可设置"),!0):o();var c=k[E]();if(a){for(var s=k.length,l=void 0===n?0:n.length,f=0;f<l;f++){var h=t[f],p=zt(n[f]);p[ft]=Dt(f),h&&Rt(h,p,f),S(p,h,f),t[f]=p}if(t.length>l)for(var d=t.splice(l,t.length-l),v=0;v<d.length;v++)S(void 0,d[v],v+l);s!==l&&(k._length.value=l)}else{var m,y,b=void 0===(n=Ft(n)?n[E]():n);for(m in t)!b&&m in n||(y=t[m],delete t[m],y[y[pt]?"value":ht]=void 0,S(void 0,y));if(!b)for(var g in n){var w=t[g],x=zt(n[g]);Rt(w,x),t[g]=x}}return S(k[E](),c),!0}return s=t[e],Ft(n)?S(n,s):void 0===s?S(n=zt(n),s,i()):s[pt]?(t=s,e="value"):(n=zt(n),a?(c=i(),S(n,t[c],c)):Rt(s,n)),o()},deleteProperty:function(t,e){var n;return t instanceof Array?S(void 0,t[n="string"==typeof e&&/^\d+$/.test(e)?parseInt(e):-1],n):S(void 0,t[e]),Reflect.deleteProperty(t,e)}})}function _t(t){var n=t.template,e=t.reactions;return{templateValue:function(){return n.join("")},isEmpty:function(){return 0===e.length},exe:function(t){return{template:n,reactions:e,context:t}},modTemplate:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n.length-1;n[e]=t(n[e])},type:"react"}}function Tt(t){if(Lt(t))return Dt(t);if("object"===mt(t))return Nt(t);throw new Error("createReactive error")}function Dt(r){var t,e,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=[],n={type:"reaction",isUndefined:function(){return void 0===r||i},get value(){var t;return null!=(t=b.add)&&t.call(b,this),r}},a=(h(n,vt,function(t){t!==r&&(r=t)}),(t={})["value"]=t.value||{},t.value.set=function(e){var n;e!==r&&(i=i&&!1,e instanceof Array&&(e=e.join("\n")),n=r,r=e,o.forEach(function(t){t(e,n)}))},h(n,pt,!0),h(n,y,function(t){return o.push(t),this.value}),h(n,lt,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r,n=1<arguments.length?arguments[1]:void 0;o.forEach(function(t){t(r,e,n)})}),h(n,"toJSON",function(){return i?void 0:this.value}),h(n,dt,function(){return o}),h(n,E,function(){return r}),n),u=t;for(e in u)(l=u[e]).configurable=l.enumerable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,e,l);if(Object.getOwnPropertySymbols)for(var c=Object.getOwnPropertySymbols(u),s=0;s<c.length;s++){var l,f=c[s];(l=u[f]).configurable=l.enumerable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,f,l)}return n}function Pt(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=n,o=0;o<i.length;o++){var a=i[o];"style"===a.type&&(i[o]=a.react())}return ct(t)?_t({template:t,reactions:n}):"string"==typeof t&&0<n.length?_t(function(t,e){for(var n=[t],r=!0,i=0;i<e.length;i++){var o=e[i],a="string"==typeof o;a&&(r?n[n.length-1]+=o:n.push(o),e.splice(i,1),i--),r||a||n.push(""),r=a}return r||n.push(""),{template:n,reactions:e}}(t,n)):Tt(t)}function g(t){return"function"==typeof t?Ct(t):t}function It(t){return ut(t.template,t.reactions.map(function(t){return"function"==typeof(t=t)?t():t.value}))}function Lt(t){return"object"!==mt(t)||null===t}function Rt(t,e,n){if(void 0!==t&&"function"!=typeof e){if(!0!==e[pt]){var r,i=Object.keys(e),o=t;for(r in t){var a=o[r],u=i.indexOf(r);-1!==u?(Rt(a,e[r],u),i.splice(u,1)):delete o[r]}for(var c=0;c<i.length;c++){var s=i[c];o[s]=zt(e[s])}}t?(l=e,f=n,0<(p=(t=t)[dt]()).length&&((h=l[dt]()).push.apply(h,yt(p)),l[lt](function(t){return t[ht]||t.value}(t),f))):e[lt](void 0,n)}var l,f,h,p}function Ft(t){return null!=t&&t[y]}function Bt(t){return Ft(t)?JSON.parse(JSON.stringify(t)):t}function zt(t){return(Lt(t=Ft(t)?t[E]:t)?Dt:Nt)(t)}function Mt(t,e){return"string"==typeof t||"number"==typeof t?t:"react"===t.type?function(t,e,n){return(n=At(t,2<arguments.length&&void 0!==n?n:"computed"))?n[y](e):t.templateValue()}(t,function(t){e(t)},"style"):g(t)[y](function(t){e(t)})}var w=Pt;function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){u=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(t,e)||Wt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t){return function(t){if(Array.isArray(t))return Ht(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Wt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){if(t){if("string"==typeof t)return Ht(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(t,e):void 0}}function Ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $t(t,e){var n,r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Wt(t))||e&&t&&"number"==typeof t.length)return r&&(t=r),n=0,{s:e=function(){},n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function Gt(t){t.remove(),Qt("removed",t)}function Vt(t,e,n){n&&(e[t="__alins_on_".concat(t)]||(e[t]=[]),e[t].push(n))}function Qt(t,e){var n="__alins_on_".concat(t);e[n]&&(e[n].forEach(function(t){t(e)}),"mounted"===t&&(e[n]=null))}function Yt(t){Qt("appended",t),Qt("mounted",t)}function Kt(t,e,n){var r=e instanceof DocumentFragment?Xt(e):null;t.insertBefore(e,n),r?r.forEach(Yt):Yt(e)}function Xt(t){return[].slice.call(t.children)}var Zt={_mountedList:[],_inMounting:!1,mountStart:function(){this._inMounting=!0,this._mountedList=[]},collectMounted:function(t,e){this._inMounting?this._mountedList.push(function(){null!=e&&e.exe()(t)}):Vt("mounted",t,null==e?void 0:e.exe())},mountFinish:function(){this._mountedList.forEach(function(t){t()}),this._mountedList=[],this._inMounting=!1}};te="mounted";var te,ee=function(t){return{type:"life",name:te,exe:function(){return t}}};function ne(t){return"./#[:".includes(t[0])?t:":".concat(t)}function re(t){if("/"!==t[0])return"";for(var e=1;e<t.length;e++)if(".#[:".includes(t[e]))return t.substring(1,e);return t.substring(1)}function ie(o){function a(t,e){c=e,s=t}function t(t,e){if("attributes"!==c||""===e){if(!c)return a(t,e);var n=o.substring(s+1,t);switch(c){case"className":u.className||(u.className=[]),u.className.push(n);break;case"id":u.id=n;break;case"attributes":u.attributes||(u.attributes={});var r=(i=qt(st(n,"="),2))[0],i=i[1];u.attributes[r]=i;break;case"textContent":u.textContent+=n;break;case"tagName":u.tagName=n}a(t,e)}}for(var u={textContent:""},c=(o=ne(o),""),s=0,e=o.length,n=0;n<e;n++)switch(o[n]){case".":t(n,"className");break;case"#":t(n,"id");break;case"[":t(n,"attributes");break;case"]":t(n,"");break;case"/":t(n,"tagName");break;case":":"textContent"!==c&&t(n,"textContent")}return t(o.length,""),u}function oe(t,e){var n;e.className&&(n=t.className).push.apply(n,Jt(e.className)),e.attributes&&Object.assign(t.attributes,e.attributes),e.id&&(t.id=e.id),e.textContent&&(t.textContent+=e.textContent)}function ae(t){var e=t.exe(),n=document.createElement(e.tag),r=!1;e.html?(r=!0,n.innerHTML=e.html.exe(function(t){n.innerHTML=t})+""):e.text&&e.text.exe(n,se(n));for(var i=0;i<e.binding.length;i++){var o=e.binding[i];oe(e,function(t,i,e,o){var r,n=e.template,a=e.reactions,u=ie(ut(n,St)),c={};if(u.textContent&&(t?console.warn("text is not supported in html or text builder"):(e=u.textContent,(r=jt(e))?se(i)?i.value=f(e,a,function(t,e){i.value=t,null!=o&&o({node:i,type:"value",value:t,prevValue:e})},!1):e.split(gt).forEach(function(t,e){var n;t&&i.appendChild(document.createTextNode(t)),r[e]&&(t=Et(r[e]),(e=a[t])&&(t=g(e),n=document.createTextNode(t[y](function(t,e){n.textContent=t,null!=o&&o({node:n,type:"text",value:t,prevValue:e})})),i.appendChild(n)))}):c.textContent=e)),u.className&&u.className.forEach(function(t){c.className||(c.className=[]),(t=f(t,a,function(t,e){e?t?i.classList.replace(e,t):i.classList.remove(e):i.classList.add(t),null!=o&&o({node:i,type:"className",value:t,prevValue:e})},!0))&&c.className.push(t)}),u.attributes)for(var s in u.attributes)!function(t){var n="",r=f(t,a,function(t,e){i.removeAttribute(e),i.setAttribute(t,n),r=t,null!=o&&o({node:i,key:r,type:"attribute-key",value:t,prevValue:e})},!0),n=f(u.attributes[t],a,function(t,e){i.setAttribute(r,t),n=t,null!=o&&o({node:i,key:r,type:"attribute-value",value:t,prevValue:e})});c.attributes||(c.attributes={}),c.attributes[r]=n}(s);return u.id&&(n=f(u.id,a,function(t,e){i.id=t,null!=o&&o({node:i,type:"id",value:t,prevValue:e})}),i.id=n),c}(r,n,o,null==(o=e.lifes.updated)?void 0:o.exe()))}if(e.domInfo&&oe(e,ie(e.domInfo)),e.textContent&&(u=n,c=e.textContent,se(u)?u.value=c:u.appendChild(document.createTextNode(c))),0<e.className.length&&(n.className=e.className.join(" ")),e.attributes)for(var a in e.attributes)n.setAttribute(a,e.attributes[a]);e.id&&(n.id=e.id),e.children&&0<e.children.length&&(r&&e.html?console.warn("children is not supported in html builder"):ue(n,e.children));for(var u,c,s,l=0;l<e.event.length;l++)e.event[l].exe(n);return e.styles.forEach(function(t){return t.exe(n)}),e.pseudos.forEach(function(t){return t.exe(n)}),u=n,c=e.lifes,Vt("appended",u,null==(s=c.appended)?void 0:s.exe()),Vt("removed",u,null==(s=c.removed)?void 0:s.exe()),Zt.collectMounted(n,e.lifes.mounted),null!=(t=e.lifes.created)&&t.exe()(n),n}function ue(t,e){var n,r,i,o=document.createDocumentFragment(),a=$t(e);try{for(a.s();!(n=a.n()).done;){var u=n.value;o.appendChild(ce(u))}}catch(t){a.e(t)}finally{a.f()}e=t,i=Xt(r=o),e.appendChild(r),i.forEach(Yt)}function ce(t){var e=document.createDocumentFragment();if("function"==typeof t)return ce(t());if(t instanceof Array){var n,r=$t(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.appendChild(ce(i))}}catch(t){r.e(t)}finally{r.f()}}else if(t instanceof HTMLElement)e.appendChild(t);else if(t)switch(t.type){case"comp":e.appendChild(ce(t.exe()));break;case"builder":e.appendChild(ae(t));break;case"if":case"switch":case"for":case"show":case"model":e.appendChild(t.exe())}return e}function se(t){return void 0!==t.value&&"BUTTON"!==t.tagName}function x(t){"string"==typeof t&&(t=document.querySelector(t)||document.body);for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(t instanceof HTMLElement)Zt.mountStart(),ue(t,n),Zt.mountFinish();else{if("builder"!==t.type&&"comp"!==t.type)throw new Error("Parent is illegal");t._asParent(n)}}function le(t,e){var n=e?"":"none";(t=t instanceof DocumentFragment?[].slice.call(t.children):t)instanceof Array?t.forEach(function(t){t.style.display=n}):t.style.display=n}var fe={for:function(s){var l=this;return function(r){function o(t,e){var n=Tt(t),t=((e=void 0===e?s[t]:e)[ft]=n,r(e,n));return Array.isArray(t)?t:[t]}for(var a=document.createComment(""),u=[],c=[],t=0;t<s.length;t++){var e=o(t);c.push(l.apply(null,e))}return s[y](function(t,e,n){var r,i;"number"==typeof n&&(-1!==(i=s.indexOf(t))?(r=u[n],u[n]=u[i],u[i]=r,t[ft].value=n):void 0===t?(de(u[n]),u[n]=void 0):(i=l.apply(null,o(n,t)),u[n]||(t=(r=pe(i)).dom,i=r.children,u[n]=i,i=(r=u[n+1])instanceof Array?r[0]:r,Kt(a.parentElement,t,i||a))))}),{exe:function(){var t,e=document.createDocumentFragment(),n=$t(c);try{for(n.s();!(t=n.n()).done;){var r=pe(t.value),i=r.dom,o=r.children;u.push(o),e.appendChild(i)}}catch(t){n.e(t)}finally{n.f()}return e.append(a),e},type:"for",mount:function(){x(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"body",this)}}}},if:function(t){function i(t,e){e=1<arguments.length&&void 0!==e&&e,t=n.apply(null,t);e?u=t:c.push(t)}function o(t){var n=h.length;(t=g(t))[y](function(t){var e=null;t?(n<s||-1===s)&&(e=pe(c[s=n]).children):0<=s&&(e=f(s)),e&&r.forEach(function(t){return t(e)})}),h.push(t)}var n=this,r=[],a=document.createComment(""),u=null,c=[],s=0,l=[],e=function(t){if(!t)return a;var e=l[s];return e||(e=pe(t).children,l[s]=e)},f=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;t<h.length;t++)if(!0===h[t].value)return e(c[s=t]);return u?(s=h.length,e(u)):(s=-1,e())},h=[];return o(t),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i(e),{exe:function(){var e=f();return r.push(function(t){t!==e&&(ve(e,t),e=t)}),me(e)},elif:function(t){var r=this;return o(t),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i(e),r}},else:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i(e,!0),this},type:"if",mount:function(){x(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"body",this)}}}},show:function(t){var i=g(t),o=this;return function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return{exe:function(){var e=pe(o.apply(null,r)).children,t=i[y](function(t){le(e,t)}),n=me(e);return le(n,t),n},type:"show",mount:function(){x(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"body",this)}}}},switch:function(t){function n(t){return(t=u.get(t)||u.get(i))?c.get(t)||(e=pe(t).children,c.set(t,e),e):a;var e}function o(t,e){t=r.apply(null,t),u.set(e,t)}var r=this,i=Symbol("def"),a=document.createComment(""),u=new Map,c=new Map,s=g(t);return{exe:function(){var e=n(s.value);return s[y](function(t){(t=n(t))!==e&&(ve(e,t),e=t)}),me(e)},case:function(r){var i=this;return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o(e,r),i}},default:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o(e,i),this},type:"switch",mount:function(){x(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"body",this)}}}},he=Object.assign({model:function(t){for(var e=arguments.length,c=new Array(1<e?e-1:0),n=1;n<e;n++)c[n-1]=arguments[n];function r(){for(var t=arguments.length,u=new Array(t),e=0;e<t;e++)u[e]=arguments[e];return{exe:function(){function t(t){e=!0,0!==c.length&&(c.includes("number")?t=parseFloat(t):c.includes("camel")&&(t=t.toLowerCase())),s.value=t}var e=!1,n=ae(l.apply(null,u)),r="true"===n.contentEditable,i=r?function(){return n.textContent||""}:function(){return n.value||""},o=r?function(t){n.textContent=t}:function(t){n.value=t},a=(o(s[y](function(t){e?e=!1:o(t)})),!1);return n.addEventListener("compositionstart",function(){a=!0}),n.addEventListener("compositionend",function(){a=!1,t(i())}),n.addEventListener("input",function(){a||t(i())}),"number"===n.getAttribute("type")&&c.push("number"),n},type:"model",mount:function(){x(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"body",this.exe())}}}var s=g(t),l=this;return r.exe=function(){return r().exe()},r.mount=function(){x(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"body",r().exe())},r.type="model",r}},fe);function pe(t){var e="comp"===t.type;return{dom:t=e?ce(t.exe()):ae(t),children:e?[].slice.call(t.children):t}}function de(t){t instanceof Array?t.forEach(function(t){Gt(t)}):Gt(t)}function ve(t,e){var n=t instanceof Array?t[0]:t,r=n.parentElement;if(!r)throw new Error("parent not found");Kt(r,me(e),n),de(t)}function me(t){var e;return t instanceof Array?(e=document.createDocumentFragment(),t.forEach(function(t){e.appendChild(t)}),e):t}e=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody"],r=[].concat(e,["abbr","article","aside","b","base","bdi","bdo","blockquote","caption","cite","del","details","dialog","em","embed","figure","footer","header","hr","menu","nav","noscript","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var"]);function ye(S){return Object.assign(function(){for(var e,t=arguments.length,k=new Array(t),n=0;n<t;n++)k[n]=arguments[n];return e=k,{exe:function(){for(var t,e,n,r,i,o,a,u,c,s,l,f,h,p=S,d=k,v={tag:p,children:[],event:[],binding:[],styles:[],pseudos:[],domInfo:"",lifes:{},textContent:""},m=0;m<d.length;m++){var y=d[m];if("number"==typeof y)v.textContent+=y;else if("string"==typeof y){var b=re(y);b&&(v.tag=b),v.domInfo+=ne(y)}else if(y instanceof Array||y instanceof HTMLElement)v.children.push(y);else if("object"===Ut(y)&&y)switch(y.type){case"reaction":v.binding.push({template:["",""],reactions:[y],context:{type:"dom-info"}});break;case"react":var g,w=y.exe({type:"dom-info"});"/"===w.template[0][0]&&(g=It(w),v.tag=re(g)),v.binding.push(w);break;case"builder":case"if":case"show":case"model":case"switch":case"for":case"comp":v.children.push(y);break;case"on":null!=(g=v.event)&&g.push(y);break;case"style":null!=(w=v.styles)&&w.push(y);break;case"pseudo":null!=(t=v.pseudos)&&t.push(y);break;case"life":v.lifes[y.name]=y;break;case"html":v.html=y;break;case"text":v.text=y;break;default:console.warn("unkonwn builder",y)}else if("function"==typeof y){var x=y();switch(x.type){case"builder":case"if":case"show":case"switch":case"for":case"comp":v.children.push(x);break;case"model":v.children.push(x.exe());break;default:x instanceof Array?d.splice.apply(d,[m,1].concat(Jt(x))):d.splice(m,1,x),m--}}}return p=v.tag,e=v.className,n=v.id,r=v.textContent,i=v.attributes,o=v.children,a=v.binding,u=v.domInfo,c=v.event,s=v._if,l=v.styles,f=v.pseudos,h=v.lifes,{tag:void 0===p?"":p,className:void 0===e?[]:e,id:void 0===n?"":n,textContent:void 0===r?"":r,attributes:void 0===i?{}:i,children:o,binding:void 0===a?[]:a,domInfo:void 0===u?"":u,event:void 0===c?[]:c,_if:s,styles:void 0===l?[]:l,pseudos:void 0===f?[]:f,lifes:void 0===h?{}:h,html:v.html,text:v.text}},type:"builder",mount:function(){x(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"body",this)},_asParent:function(t){e.push.apply(e,Jt(t))}}},he)}be={},r.map(function(t){be[t]=ye(t)});var be,ge=be,r=qt(e.map(function(t){return ge[t]}),34),we=r[0],k=r[1],xe=(r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15],r[16],r[17],r[18],r[19],r[20],r[21],r[22],r[23],r[24],r[25]),o=(r[26],r[27],r[28],r[29]);function j(r){return{exe:function(e,t){var n;t?e.value=Mt(r,function(t){e.value=t+""})+"":(n=document.createTextNode(Mt(r,function(t){n.textContent=t+""})+""),e.appendChild(n))},type:"text"}}function ke(i,o){var a=[];return{exe:function(){for(var t={props:{},events:{},slots:{}},e=0;e<o.length;e++){var n=o[e];if("function"==typeof n)o.push.apply(o,Jt(n()));else if(n)switch(n.type){case"prop":t.props=n.exe();break;case"event":t.events=n.exe();break;case"slot":t.slots=n.exe()}}if(!i)throw new Error("Component not found");var r=i(t);return 0<a.length&&(r instanceof Array?r.push(a):r=[r,a]),r},type:"comp",mount:function(){x(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"body",this)},_asParent:function(t){a.push.apply(a,Jt(t))}}}r[30],r[31],r[32],r[33];var i=Object.assign(function(r){return Object.assign(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ke(r,e)},ke(r,[]),fe)},fe),Se=function(i){return{type:"prop",exe:function(){var t,r={};for(t in i)!function(t){var e=i[t],n="function"==typeof e?e:Ft(e)?function(){return e.value}:function(){return e};r[t]=Ct(n)}(t);return r}}},Ee=function(t){return{type:"slot",exe:function(){return t}}},e=["click","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","touchend","touchmove","touchstart","wheel","input","change"],r=[].concat(e,["fullscreenchange","fullscreenerror","copy","cut","paste","abort","auxclick","beforeinput","blur","canplay","canplaythrough","close","compositionend","compositionstart","compositionupdate","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","error","focus","focusin","focusout","formdata","gotpointercapture","invalid","keydown","keypress","keyup","load","loadeddata","loadedmetadata","loadstart","lostpointercapture","mouseout","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointermove","pointerout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","select","selectionchange","selectstart","submit","suspend","timeupdate","toggle","touchcancel"]);function je(o,a,e){var u=[];return{args:function(){return u.push.apply(u,arguments),this},exe:function(n){var r,i;0===e.length?a&&n.addEventListener(o,function(t){a.apply(n,[].concat(u,[t,n]))}):(i=(r=function(t){return e.includes(t)})("capture"),n.addEventListener(o,function t(e){r("self")&&e.target!==n||(r("stop")&&e.stopPropagation(),r("prevent")&&e.preventDefault(),a&&a.apply(n,[].concat(u,[e])),r("once")&&n.removeEventListener(o,t,i))},i))},type:"on",name:o}}function Oe(i){return Object.assign(function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return je(i,t,n)},{prevent:je(i,null,["prevent"]),stop:je(i,null,["stop"])})}Ce={},r.map(function(t){Ce[t]=Oe(t)});var Ce,Ae=Ce,r=qt(e.map(function(t){return Ae[t]}),13),Ne=r[0];function _e(t){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){u=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(t,e)||Pe(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(t){return function(t){if(Array.isArray(t))return Ie(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Pe(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(t,e){if(t){if("string"==typeof t)return Ie(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(t,e):void 0}}function Ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Le(t,e){var n,r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Pe(t))||e&&t&&"number"==typeof t.length)return r&&(t=r),n=0,{s:e=function(){},n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12];var Re,Fe="undefined"!==window.document.adoptedStyleSheets&&!!window.CSSStyleSheet;function Be(t){var e;return t?ze(t):Fe?(e=new CSSStyleSheet,window.document.adoptedStyleSheets.push(e),function(t){e.replace(t)}):ze(document.head)}function ze(t){var e=document.createElement("style");return t.appendChild(e),function(t){e.textContent=t}}function Me(){return{cursorUrl:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,o=e.map(function(t){return"string"==typeof(e=t)||"number"==typeof e?function(){return e}:"react"===e.type?function(){return It(e.exe({type:"computed"}))}:e;var e});return{cursor:w(Re=Re||(r=["url('","'), ",""],i=i||r.slice(0),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(i)}}))),o[0],o[1]||"default")}}}}var Ue,qe,Je,We,He="i",$e="px",e=(Ue={generate:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=O(this._result).generate(t);return 0!==this._styles.length&&this._styles.forEach(function(t){e.scopeTemplate+=sn(t,e.scopeReactions)}),e},exe:function(e){return 0<this._styles.length&&this._styles.forEach(function(t){"string"==typeof t||"react"===t.type?O(t).exe(e):"style"===t.type?t.exe(e):"object"===_e(t)&&O(t).exe(e)}),O(this._result).exe(e)},join:function(){var t;return(t=this._styles).push.apply(t,arguments),this},type:"style"},qe={join:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object.assign(Ve([].concat(e)),Ue)}},["paddingTop","paddingBottom","paddingLeft","paddingRight","marginTop","marginBottom","marginLeft","marginRight","fontSize","lineHeight","top","left","bottom","right","borderRadius","textIndent","width","maxWidth","minWidth","height","maxHeight","minHeight","flexBasis","opacity","zIndex","flex","flexGrow","flexShrink","margin","padding","textDecoration","position","alignItems","justifyContent","display","alignContent","backgroundAttachment","backgroundBlendMode","backgroundClip","backgroundOrigin","backgroundRepeat","boxSizing","clear","textAlign","wordWrap","whiteSpace","wordBreak","wordSpacing","verticalAlign","fontStyle","flexDirection","flexWrap","resize","textOverflow","float","visibility","overflow","overflowX","overflowY","cursor","border","borderBottom","borderTop","borderLeft","borderRight","boxShadow","fontFamily","fontWeight","animation","backgroundImage","backgroundSize","backgroundPosition","backdropFilter","filter","transform","transition","outline","clip","flexFlow","textShadow","content","color","backgroundColor","borderColor"].forEach(function(r){Ue[r]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._result[r]=function(t,e,n,r){n===He&&(r=He,n="");var i="".concat(n||"").concat(r===He?"!important":""),o=!!n||tn.includes(t);return"number"==typeof e||"string"==typeof e?Qe(o,e,i):"react"===e.type?function(){return Qe(o,It(e.exe({type:"style"})),i)}:"function"==typeof e?function(){return Qe(o,e(),i)}:function(){return Qe(o,e.value,i)}}.apply(null,[r].concat(e)),this},Ge(r)}),Je={borderBox:{boxSizing:"border-box"},relative:{position:"relative"},absolute:{position:"absolute"},fixed:{position:"fixed"}},Object.keys(Je).forEach(function(t){Ue[t]=function(){return Object.assign(this._result,Je[t]),this},Ge(t)}),We=Me(),Object.keys(We).forEach(function(t){Ue[t]=function(){return Object.assign(this._result,We[t].apply(We,arguments)),this}}),qe);function Ge(e){qe[e]=function(){var t;return(t=Object.assign(Ve([]),Ue))[e].apply(t,arguments)}}function Ve(t){return{get:function(t){return this._result[t]},_result:{},_styles:De(t)}}function Qe(t,e,n){return t||"string"==typeof e||"number"!=typeof e?e+n:"".concat(e).concat($e).concat(n)}var Ye=["animation","transform","filter","transition"],Ke=["webkit","moz","ms","o"],Xe=new RegExp("(".concat(Ye.join("|"),") *:.*?(;|$)"),"g");function Ze(t){return t.replace(Xe,function(e){var n=e;return Ke.forEach(function(t){n+="-".concat(t,"-").concat(e)}),n})}var tn=["zIndex","opacity","flex","flexGrow","flexShrink"],O=Object.assign(function(a){for(var t=arguments.length,u=new Array(1<t?t-1:0),e=1;e<t;e++)u[e-1]=arguments[e];return{generate:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i="",o=[];if("string"==typeof a)i+=an(a,!0);else if(ct(a)){var t=a;0===u.length?i+=an(t[0],!0):(i+=an(Ot(t,r),!0),o.push.apply(o,u))}else if("react"===a.type){var e=(t=a.exe({type:"style"})).template,t=t.reactions;i+=an(Ot(e,r),!0),t.push.apply(t,De(t))}else{if("object"!==_e(a)&&null===a)return console.warn("Invalid style arguments",a,u),{scopeTemplate:"",scopeReactions:[]};for(var n in a)!function(e){var t=(n=function(t,e,n,r){var i,e=1<arguments.length&&void 0!==e?e:0,n=2<arguments.length?n:void 0,r=3<arguments.length?r:void 0,o="",a=[];return"string"==typeof t||"number"==typeof t?o+=n?n(t):t:"react"===t.type?(i=(n=t.exe({type:"style"})).template,0<(n=n.reactions).length?(o=Ot(i,e),a.push.apply(a,yt(n))):o=i.join("")):(n=g(t),r&&(n=r(n)),o=St(e),a.push(n)),{reactions:a,template:o}}(a[e],o.length+r,function(t){return rn(e,t)},function(t){return on(e,t.value)?Ct(function(){return t.value+$e}):t})).reactions,n=n.template;0<t.length&&o.push.apply(o,De(t)),i+="".concat(nn(e),":").concat(n,";")}(n)}return{scopeTemplate:Ze(i),scopeReactions:o}},exe:function(t){var e=t.getAttribute("style")||"",n="";if("string"==typeof a)n+=an(a,!0);else if(ct(a))0===u.length?n+=a[0]:n=en(a,u,t.style,n);else if("react"===a.type)var r=a.exe({type:"style"}),n=en(r.template,r.reactions,t.style,n);else if("object"===_e(a)||null!==a){var i,o=t.style;for(i in a)!function(e){var t=Mt(a[e],function(t){un(o,e,t)});n+="".concat(nn(e),":").concat(rn(e,t),";")}(i)}else console.warn("Invalid style arguments");t.setAttribute("style",e+Ze(n))},mount:function(t){if(!(t="string"==typeof t?document.querySelector(t):t))throw new Error("invalid dom");this.exe(t)},react:function(){var t=this.generate(),e=t.scopeReactions,n=t.scopeTemplate.split(gt);return function(){return It({template:n,reactions:e})}},type:"style"}},e);function en(t,e,n,r){return(r+=(t=Te(an(Ot(t)),2))[0])+function(i,o,a){var t,u="";for(t in o)!function(t){var e,n="",r=f(t,a,function(t,e){i[e]="",un(i,t,n),r=t},!0),n=f(o[t],a,function(t){un(i,r,t),n=t});u+=(t=r,e=n,"".concat(nn(t),":").concat(rn(t,e),";"))}(t);return u}(n,t[1],e)}function nn(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}function rn(t,e){return e+(on(t,e)?$e:"")}function on(t,e){return"number"==typeof e&&!tn.includes(t)}function an(t,e){var n=1<arguments.length&&void 0!==e&&e;if(!t)return t;for(var r=t.split(/[;\n]/),i="",o={},a=0;a<r.length;a++){var u,c,s,l=r[a].trim();l&&(u=(c=Te(st(l,":"),2))[0],(c=c[1])&&(s=nn(u),gt.test(l)&&!n?o[u]=c:i+="".concat(s,":").concat(c,";")))}return n?i:[i,o]}function un(t,e,n){var r,i,o;n=rn(e,n),t[e]=n,r=t,i=e,o=n,Ye.includes(i)&&Ke.forEach(function(t){r["-".concat(t,"-").concat(i)]=o})}function cn(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];function n(t){var e=function t(e,n){var r,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],a=ln(i,e),u="",c="",s=Le(n);try{for(s.s();!(r=s.n()).done;){var l,f=r.value;f instanceof Array?(u+=(l=t(f[0],f.slice(1),a,o)).template,o.push.apply(o,De(l.reactions))):c+=sn(f,o)}}catch(e){s.e(e)}finally{s.f()}return c=Ze(c),{template:(a?"".concat(a,"{").concat(c,"}"):"".concat(c)).concat(u),reactions:o}}(i,r),n=e.template;0<(e=e.reactions).length?t(f(n,e,t)):t(n)}return{reactiveStyle:n,mount:function(t){var e=null;if(t&&!(e="string"==typeof t?document.querySelector(t):t))throw new Error("Invalid mount target");return n(Be(e))}}}}function sn(t,e){var n,r,i="";return"string"==typeof t?i=t:"object"===_e(t)&&(i="react"===t.type?(n=t.exe({type:"style"}),r=e.length,e.push.apply(e,De(n.reactions)),Ot(n.template,r)):(r=(n=(t="style"!==t.type?O(t):t).generate(e.length)).scopeReactions,t=n.scopeTemplate,e.push.apply(e,De(r)),t)),an(i,!0)}function ln(t,e){return t||e?"&"===e[0]?"".concat(t).concat(e.substring(1)):"".concat(t," ").concat(e):""}function fn(t){return t<10?"0".concat(t):t}function hn(t){if("object"===v(t))return t;try{return JSON.parse(t)}catch(t){return null}}function pn(){return-1!==navigator.userAgent.indexOf("Macintosh")}Be();var C,A,dn=w("admin"),vn=w(""),mn=w(""),N=(C=w({text:"",list:[],enabled:!1}),{get text(){return C.text},get enabled(){return C.enabled},get list(){return C.list},setHint:function(t,e){C.text=t,C.enabled=!0,C.list[ht]=e},hideHint:function(){C.enabled=!1}}),_=(A=w({enabled:!1,content:"",filepath:"",touch:!1}),{get enabled(){return A.enabled},get content(){return A.content},get filepath(){return A.filepath},get touch(){return A.touch},enterEdit:function(t,e){var n,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];A.content=e,A.filepath=t,A.enabled=!0,A.touch=r,e=document.querySelector("#Editor"),window.getSelection?(e.focus(),null!=(n=window.getSelection())&&n.selectAllChildren(e),null!=n&&n.collapseToEnd()):document.selection&&((n=document.selection.createRange()).moveToElementText(e),n.collapse(!1),n.select())},quitEdit:function(){var t;A.content="",A.enabled=!1,null!=(t=document.querySelector("#InputInput"))&&t.focus()}}),yn=O.fontFamily('Menlo, Monaco, "Courier New", monospace'),T={Blue:O.color("#5f5fff"),Success:O.color("#4d4"),Fail:O.color("#f00"),Warn:O.color("#ffb300"),Gray:O.color("#bbb")},bn={FontSize:O.fontSize(16),SuccessColor:T.Success};function gn(t){return O.display("inline-block").width(t)}cn()(["::-webkit-scrollbar",O({width:5,cursor:"pointer",height:5})],["::-webkit-scrollbar-button, ::-webkit-scrollbar-track",O({display:"none"})],["::-webkit-scrollbar-thumb",O({backgroundColor:"hsla(0,0%,53.3%,.4)",cursor:"pointer"})],["::-webkit-scrollbar-track-piece",O({backgroundColor:"hsla(0,0%,53.3%,.06666666666666667)"})]).mount(),cn("body").apply(void 0,[O.backgroundColor("#111").color("#fff").join(bn.FontSize).margin(0).padding(15),yn].concat(l([[".help-item",O.display("flex").alignItems("center")],[".help-name",gn(90)],[".help-text",gn(320)]]))).mount();var wn,xn,kn=O.padding(10).outline("none").border("1px solid #444").margin("10px 0").join({WebkitUserModify:"read-write-plaintext-only",minHeight:"100px"}),Sn=O.textDecoration("underline").color("#5f5fff").cursor("pointer").marginRight(10);function En(e,n){var r;return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.Disk.findFileByPath(e);case 2:if(t.t1=r=t.sent,t.t0=null===t.t1,t.t0){t.next=6;break}t.t0=void 0===r;case 6:if(!t.t0){t.next=10;break}t.t2=void 0,t.next=11;break;case 10:t.t2=r.write({content:n});case 11:return t.abrupt("return",t.t2);case 12:case"end":return t.stop()}},t)}))}var jn=i(function(){function n(){return d(void 0,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,En(_.filepath.value,_.content.value);case 2:_.quitEdit();case 3:case"end":return t.stop()}},t)}))}function r(){_.quitEdit()}window.addEventListener("keydown",function(t){var e;_.enabled.value&&(27===t.keyCode?r():83===(e=t).keyCode&&(pn()?e.metaKey:e.ctrlKey)&&(n(),t.preventDefault()))});return[k(O.color(function(){return _.touch.value?T.Success._result.color:"#aaa"}).marginBottom(10),w(wn=wn||q(["Edit: ",""]),_.filepath),w(xn=xn||q(["",""]),function(){return _.touch.value?" (New File)":""})),k(o(Sn,j("Save[".concat(pn()?"command":"ctrl","+s]")),Ne(n)),o(Sn,j("Quit[esc]"),Ne(r))),k.model(_.content)("#Editor[contenteditable=true][spellcheck=false]",kn,Oe("keydown")(function(t){9===t.keyCode&&t.preventDefault()}))]}),D=function(){function t(){a(this,t),this.commandName="",this.args=[],this.subCommands={},this.desc="",this.hint="file",this.hintArray=[],this.files={}}return u(t,[{key:"subNames",get:function(){return Object.keys(this.subCommands)}},{key:"help",get:function(){return this.commandName+" <filename|filepath>"}},{key:"init",value:function(){return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}))}},{key:"run",value:function(n){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.args=n,e=Object.keys(this.subCommands),!(0<n.length&&e.includes(this.args[0]))){t.next=14;break}if(e=this.args.shift(),"function"==typeof(e=this.subCommands[e]))return t.next=8,e.call(this,this.args);t.next=9;break;case 8:return t.abrupt("return",t.sent);case 9:return t.next=11,e.main.call(this,this.args,e);case 11:return t.abrupt("return",t.sent);case 14:return t.abrupt("return",this.main(n));case 15:case"end":return t.stop()}},t,this)}))}},{key:"success",value:function(){return{commandName:this.commandName,args:this.args,success:!0,message:"",result:0<arguments.length&&void 0!==arguments[0]?arguments[0]:null}}},{key:"fail",value:function(){return{commandName:this.commandName,args:this.args,success:!1,message:0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",error:1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,result:null}}},{key:"noMainCommand",value:function(){return this.fail("Please use sub command: "+this.help)}},{key:"createSoftwareDir",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.commandName;return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.Disk.createChildByPath("/System/Software/".concat(e),!0,!0);case 2:this.softwareDir=t.sent;case 3:case"end":return t.stop()}},t,this)}))}},{key:"createSoftwareFile",value:function(e){return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("File name is Empty: "+e);case 2:if(e in this.files)throw new Error("File is already exists: "+e);t.next=4;break;case 4:return t.next=6,L.Disk.createChildByPath("/System/Software/".concat(this.commandName,"/").concat(e),!1,!0);case 6:return this.files[e]=t.sent,t.abrupt("return",this.files[e]);case 8:case"end":return t.stop()}},t,this)}))}},{key:"initSubCommands",value:function(){if(0<Object.keys(this.subCommands).length)for(var t in this.subCommands){t=this.subCommands[t];"object"===v(t)&&"function"==typeof t.init&&t.init.call(this,t)}}},{key:"readSubJson",value:function(t){t=this.files[t];return t&&"string"==typeof t.content?hn(t.content):null}},{key:"appendSubJson",value:function(n,r,i){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.readSubJson(n)||{})[r]=i,t.next=4,this.writeSubJson(n,e);case 4:case"end":return t.stop()}},t,this)}))}},{key:"writeSubJson",value:function(e,n){var r;return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null==(r=this.files[e])?void 0:r.write({content:JSON.stringify(n)});case 2:case"end":return t.stop()}},t,this)}))}},{key:"getSub",value:function(t){return this.subCommands[t]}}]),t}();function On(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return d(this,void 0,void 0,S().mark(function t(){var e,n;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=m.join.apply(m,r),t.next=3,L.CurrentDir.findChildByPath(e);case 3:if(!(n=t.sent)){t.next=12;break}if("file"===n.type)return t.abrupt("return",{success:!1,message:"Target is not a directory: "+n.name});t.next=7;break;case 7:return vn.value=n.isDisk?"":n.name,L.CurrentDir=n,t.abrupt("return",{success:!0,message:""});case 12:return t.abrupt("return",{success:!1,message:"Target not found"});case 13:case"end":return t.stop()}},t)}))}var Cn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="cd",t.desc="Go to the directory",t}return u(n,[{key:"help",get:function(){return this.commandName+" <dirname>"}},{key:"main",value:function(n){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,On.apply(void 0,l(n));case 2:if((e=t.sent).success)return t.abrupt("return",this.success());t.next=7;break;case 7:return t.abrupt("return",this.fail(e.message));case 8:case"end":return t.stop()}},t,this)}))}}]),n}(),An="_webos_",Nn=window.localStorage;function _n(t){t=Nn.getItem(t+An);if(null===t)return null;var e,n=t.indexOf(":"),r="string";return-1!==n&&(e=t.substr(0,n),-1!==["string","number","boolean","object","undefined"].indexOf(e)&&(r=e,t=t.substr(n+1))),"number"===r?parseFloat(t):"boolean"===r?"true"===t:"object"===r?hn(t):t}var Tn={read:_n,write:function(t,e){return t=t,"object"===(n=v(e=e))?e=JSON.stringify(e):"string"!==n&&(e=e.toString()),void Nn.setItem(t+An,"".concat(n,":").concat(e));var n},remove:function(t){return Nn.removeItem(t)}};function Dn(){var t="last_login",e=Tn.read(t);return Tn.write(t,function(t){return t=0<arguments.length&&void 0!==t?t:new Date,"".concat(t.getFullYear(),"-").concat(fn(t.getMonth()),"-").concat(fn(t.getDate())," ").concat(fn(t.getHours()),":").concat(fn(t.getMinutes()),":").concat(fn(t.getSeconds()))}()),k(O.marginBottom(20),k(O.marginBottom(5),e?"Last login: ".concat(e):"First Login!"),k(O.marginBottom(10),we("Web-OS",T.Blue,"[href=https://github.com/theajack/webos]"),o(" made by "),we("theajack",T.Blue,"[href=https://github.com/theajack]"),o(", UI is Powered by "),we("alins",T.Blue,"[href=https://github.com/alinsjs/alins]")),k("Use `help` command to Start!"))}var Pn="#TermHistory";function In(){return k(Pn,Ne.stop,O.color("#bbb").lineHeight(20),i(Dn))}var Ln=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="clear",t.hint="none",t.desc="Clear console",t}return u(n,[{key:"help",get:function(){return this.commandName}},{key:"main",value:function(){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.querySelector(Pn))return e.innerHTML="",t.abrupt("return",this.success());t.next=6;break;case 6:return t.abrupt("return",this.fail("history not found"));case 7:case"end":return t.stop()}},t,this)}))}}]),n}();function Rn(t){return o(O.marginRight(20),j(t))}function Fn(t){return o(O.marginRight(20),j(t.name))}var Bn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="ls",t.desc="Displays subfile information",t}return u(n,[{key:"help",get:function(){return this.commandName+" <dirname>"}},{key:"main",value:function(n){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.CurrentDir.findDirByPath(m.join(n[0]));case 2:if(!(e=t.sent)){t.next=9;break}if("file"===e.type)return t.abrupt("return",this.fail("Target is not a directory: "+e.name));t.next=6;break;case 6:return t.abrupt("return",this.success(e.ls().map(Rn)));case 9:return t.abrupt("return",this.fail("history not found"));case 10:case"end":return t.stop()}},t,this)}))}}]),n}();var zn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="pwd",t.desc="show current path",t}return u(n,[{key:"help",get:function(){return this.commandName}},{key:"main",value:function(){return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.success(L.CurrentPath));case 1:case"end":return t.stop()}},t,this)}))}}]),n}(),Mn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="mkdir",t.desc="Create a directory",t}return u(n,[{key:"help",get:function(){return this.commandName+" <dirname>"}},{key:"main",value:function(n){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n[0]){t.next=3;break}return t.abrupt("return",this.fail("mkdir: Dir name is empty"));case 3:return t.prev=3,t.next=6,L.CurrentDir.createChildByPath(e,!0);case 6:if(t.sent)return t.abrupt("return",this.success(k("success")));t.next=8;break;case 8:return t.abrupt("return",this.fail("mkdir failed: Target Path is exist:"+e));case 11:return t.prev=11,t.t0=t.catch(3),console.error(t.t0),t.abrupt("return",this.fail("mkdir failed: "+e));case 15:case"end":return t.stop()}},t,this,[[3,11]])}))}}]),n}();function Un(e){return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.CurrentDir.createChildByPath(e,!1);case 3:if(t.sent)return t.abrupt("return","");t.next=5;break;case 5:return t.abrupt("return","Touch failed: Target File is exist:"+e);case 8:return t.prev=8,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return","Touch failed: "+e);case 12:case"end":return t.stop()}},t,null,[[0,8]])}))}var qn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="touch",t.desc="Create file",t}return u(n,[{key:"help",get:function(){return this.commandName+" <filename>"}},{key:"main",value:function(r){return d(this,void 0,void 0,S().mark(function t(){var e,n;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r[0]){t.next=3;break}return t.abrupt("return",this.fail("Touch: Dir name is empty"));case 3:return t.next=5,Un(e);case 5:if(n=t.sent){t.next=8;break}return t.abrupt("return",this.success(k(j("Touch File Success: "+e))));case 8:return t.abrupt("return",this.fail(n));case 9:case"end":return t.stop()}},t,this)}))}}]),n}();function Jn(t){t="string"==typeof t?m.join([t]):m.join.apply(m,l(t));return L.CurrentDir.findChildByPath(t)}var Wn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="cat",t.desc="Displat file content",t}return u(n,[{key:"help",get:function(){return this.commandName+" <filename>"}},{key:"main",value:function(r){return d(this,void 0,void 0,S().mark(function t(){var e,n;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jn(r);case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return",this.fail("Target is not exist"));case 5:if(e.isDir)return t.abrupt("return",this.fail("Target is not a file"));t.next=7;break;case 7:if(n=e.contentString){t.next=11;break}return t.abrupt("return",this.success(k(bn.SuccessColor,"File content is empty")));case 11:return t.abrupt("return",this.success(k(O.whiteSpace("pre"),j(n))));case 12:case"end":return t.stop()}},t,this)}))}}]),n}(),Hn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="vim",t.desc="Edit file content",t}return u(n,[{key:"help",get:function(){return this.commandName+" <filename>"}},{key:"main",value:function(o){return d(this,void 0,void 0,S().mark(function t(){var e,n,r,i;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jn(o);case 2:if(e=t.sent,n="",r=!1,e){t.next=14;break}return t.next=8,Un(o[0]);case 8:if(i=t.sent)return t.abrupt("return",this.fail(i));t.next=11;break;case 11:r=!0,t.next=18;break;case 14:if(e.isDir)return t.abrupt("return",this.fail("Target is not a file"));t.next=16;break;case 16:n=e.contentString;case 18:return setTimeout(function(){var t=e?e.path.path:m.join(L.CurrentPath,o[0]);_.enterEdit(t,n,r)}),t.abrupt("return",this.success());case 20:case"end":return t.stop()}},t,this)}))}}]),n}(),$n=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="rm",t.desc="Remove file or directory",t}return u(n,[{key:"main",value:function(n){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jn(n);case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return",this.fail("Target is not exist"));case 5:return t.next=7,e.remove();case 7:return t.abrupt("return",this.success("Removed ".concat(e.path.path,"!")));case 8:case"end":return t.stop()}},t,this)}))}}]),n}(),Gn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="cp",t.desc="Copy file or directory",t}return u(n,[{key:"help",get:function(){return this.commandName+" <source> <target>"}},{key:"main",value:function(o){return d(this,void 0,void 0,S().mark(function t(){var e,n,r,i;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=p(o,2),e=n[0],n=n[1],e){t.next=3;break}return t.abrupt("return",this.fail("Source path is empty!"));case 3:if(n){t.next=5;break}return t.abrupt("return",this.fail("Target path is empty!"));case 5:return t.next=7,Jn(e);case 7:if(r=t.sent){t.next=10;break}return t.abrupt("return",this.fail("Source is not exist"));case 10:return t.next=12,Jn(n);case 12:if(i=t.sent){t.next=15;break}return t.abrupt("return",this.fail("Target is not exist"));case 15:if(i.isDir){t.next=17;break}return t.abrupt("return",this.fail("Target is not a directory"));case 17:return i.paste(r.copy()),t.abrupt("return",this.success("Copy success ".concat(r.path.path," => ").concat(i.path.path).concat(r.path.path)));case 19:case"end":return t.stop()}},t,this)}))}}]),n}();function Vn(t){var e=w("ping ".concat(t)),n=w(T.Blue._result.color),r="",i=Date.now(),o=setInterval(function(){r.length<3?r+=".":r="",e.value="ping ".concat(t).concat(r),5e3<Date.now()-i&&(e.value="ping ".concat(t," Timeout! time=").concat(Date.now()-i,"ms"),n.value=T.Fail._result.color,clearInterval(o))},500),a=function(){e.value="ping ".concat(t," success! ttl=").concat(Date.now()-i,"ms"),n.value=T.Success._result.color,clearInterval(o)},u=0===(u=t).indexOf("http")?u:"https://".concat(u),c=new XMLHttpRequest;c.open("get",u,!0);try{c.send()}catch(t){}return c.onreadystatechange=function(){4===c.readyState&&a()},k(O.color(n),j(e))}var Qn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="ping",t.desc="Ping url address",t}return u(n,[{key:"help",get:function(){return this.commandName+" <url address>"}},{key:"main",value:function(n){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n[0]){t.next=3;break}return t.abrupt("return",this.fail("Ping targer is Empty!"));case 3:return t.abrupt("return",this.success(Vn(e)));case 4:case"end":return t.stop()}},t,this)}))}}]),n}(),Yn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="help",t.desc="Get help",t.hint="command",t}return u(n,[{key:"help",get:function(){return this.commandName+" <command name>"}},{key:"main",value:function(i){return d(this,void 0,void 0,S().mark(function t(){var e,n,r;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=lr.map(function(t){return{commandName:t.commandName,help:t.help,desc:t.desc}}),e=i[0],0===(n=e?n.filter(function(t){return t.commandName===e})||[]:n).length)return t.abrupt("return",this.fail("Command Not Found"));t.next=5;break;case 5:return(r=n.map(function(t){return k(".help-item",o(".help-name",t.commandName),o(".help-text",t.help),o(j(t.desc)))})).unshift(k(T.Blue,o(".help-name","Name"),o(".help-text","Useage"),o("Description"))),t.abrupt("return",this.success(r));case 8:case"end":return t.stop()}},t,this)}))}}]),n}(),Kn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="find",t.desc="Filter file or directory with name",t}return u(n,[{key:"help",get:function(){return this.commandName+" <querystring>"}},{key:"main",value:function(n){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===(e=L.CurrentDir.filerChild(n[0])).length)return t.abrupt("return",this.fail("No file or directory found"));t.next=3;break;case 3:return t.abrupt("return",this.success(e.map(function(t){return k(j("".concat(t.path.path).concat(t.isDir?"/":"")))})));case 4:case"end":return t.stop()}},t,this)}))}}]),n}();function Xn(n){function t(e){return function(t){k(j(t),e).mount(n)}}return{log:t(T.Gray),error:t(T.Fail),warn:t(T.Warn),info:t(T.Blue),table:t(T.Gray),clear:function(){}}}var Zn=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="run",t.desc="run js file, use console to log result",t}return u(n,[{key:"help",get:function(){return this.commandName+" <filename>"}},{key:"main",value:function(i){return d(this,void 0,void 0,S().mark(function t(){var e,n,r;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jn(i);case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return",this.fail("Target is not exist"));case 5:if(e.isDir)return t.abrupt("return",this.fail("Target is not a file"));t.next=7;break;case 7:if((n=e).content){t.next=10;break}return t.abrupt("return",this.success("File content is Empty!"));case 10:return r=k(k(T.Success,j("Running: ".concat(n.path.path))),k(kn.join({minHeight:"auto"}),j(n.content+"")),ee(function(t){new Function("console",""+n.content)(Xn(t))})),t.abrupt("return",this.success(r));case 12:case"end":return t.stop()}},t,this)}))}}]),n}(),tr=function(){c(i,D);var r=s(i);function i(t,e){var n;return a(this,i),(n=r.call(this)).commandName=t,n.desc="Search with "+t,n.replace=e,n}return u(i,[{key:"main",value:function(e){return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.open(this.replace(e.join(" "))),t.abrupt("return",this.success());case 2:case"end":return t.stop()}},t,this)}))}}]),i}(),er=function(){c(e,tr);var t=s(e);function e(){return a(this,e),t.call(this,"baidu",function(t){return"https://www.baidu.com/s?wd=".concat(t)})}return u(e)}(),nr=function(){c(e,tr);var t=s(e);function e(){return a(this,e),t.call(this,"google",function(t){return"https://www.google.com/search?q=".concat(t)})}return u(e)}(),rr={github:"github.com",npm:"www.npm.com",baidu:"www.baidu.com","腾讯视频":"https://v.qq.com","网易云音乐":"https://music.163.com/",qq:"www.qq.com",w3school:"www.w3school.com.cn",runoob:"www.runoob.com",vue:"https://vuejs.org/",react:"https://reactjs.org/",angular:"https://angular.io",alins:"https://alinsjs.github.io/docs/","掘金":"https://juejin.cn/",csdn:"https://www.csdn.net/",gitee:"www.gitee.com"},ir=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="open",t.desc="Open website",t.hint="custom",t.hintArray=Object.keys(rr),t}return u(n,[{key:"help",get:function(){return this.commandName+" <content>"}},{key:"main",value:function(r){return d(this,void 0,void 0,S().mark(function t(){var e,n;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r[0],n=function(t){return 0===t.indexOf("http")?t:"https://".concat(t)},rr[e]?window.open(n(rr[e])):window.open(n(e)),t.abrupt("return",this.success());case 4:case"end":return t.stop()}},t,this)}))}}]),n}(),or="book_list",ar=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="bookmark",t.desc="Bookmark manager",t.hint="none",t.subCommands={list:{help:"".concat(t.commandName," list"),init:function(){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.readSubJson(or),e=Object.keys(e||{}),this.getSub("open").hintArray=e,this.getSub("remove").hintArray=e;case 4:case"end":return t.stop()}},t,this)}))},main:function(){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.readSubJson(or)||{},t.abrupt("return",this.success(Object.keys(e).map(function(t){return k(j("".concat(t,": ").concat(e[t])))})));case 2:case"end":return t.stop()}},t,this)}))}},open:{hintArray:[],help:"".concat(t.commandName," open <name|url>"),main:function(r){return d(this,void 0,void 0,S().mark(function t(){var e,n;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=p(r,1),e=e[0],n=this.readSubJson(or)||{},n=n[e]||e,window.open(n.startsWith("http")?n:"https://".concat(n)),t.abrupt("return",this.success());case 5:case"end":return t.stop()}},t,this)}))}},add:{hint:"none",help:"".concat(t.commandName," add [name] <url>"),main:function(r){var i;return d(this,void 0,void 0,S().mark(function t(){var e,n;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=p(r,2),e=n[0],n=n[1],t.next=3,this.appendSubJson(or,e,n||"");case 3:return null!=(i=this.getSub("open").hintArray)&&i.push(e),t.abrupt("return",this.success());case 5:case"end":return t.stop()}},t,this)}))}},remove:{hintArray:[],help:"".concat(t.commandName," remove <name|url>"),main:function(r){return d(this,void 0,void 0,S().mark(function t(){var e,n;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=p(r,1),e=e[0],n=this.readSubJson(or)||{},e in n)return delete n[e],t.next=6,this.writeSubJson(or,n);t.next=9;break;case 6:return(n=this.getSub("open").hintArray)&&n.splice(n.indexOf(e),1),t.abrupt("return",this.success());case 9:return t.abrupt("return",this.fail("Bookmark name is not exists: "+e));case 10:case"end":return t.stop()}},t,this)}))}}},t}return u(n,[{key:"help",get:function(){return"".concat(this.commandName," <").concat(this.subNames.join("|"),"> <content>")}},{key:"init",value:function(){return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createSoftwareDir();case 2:return t.next=4,this.createSoftwareFile("book_list");case 4:case"end":return t.stop()}},t,this)}))}},{key:"main",value:function(){return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.noMainCommand());case 1:case"end":return t.stop()}},t,this)}))}}]),n}(),ur=function(){c(e,tr);var t=s(e);function e(){return a(this,e),t.call(this,"music",function(t){return"https://music.163.com/#/search/m/?s=".concat(t)})}return u(e)}();var cr={};function sr(t){return cr[t]}var lr=[];function fr(){lr=[Ln,Bn,Cn,zn,Mn,qn,Hn,Wn,$n,Gn,Qn,Yn,Kn].concat(l([Zn,er,nr,ar,ir,kr,ur])).map(function(t){return dr(t)})}function hr(){return lr.map(function(t){return t.commandName})}function pr(r){return d(this,void 0,void 0,S().mark(function t(){var e,n;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=function(t,e){return-1===(e=t.indexOf(1<arguments.length&&void 0!==e?e:" "))?[t,""]:[t.substring(0,e).trim(),t.substring(e+1).trim()]}(r.trim()," "),n=p(n,2),e=n[0],n=n[1],cr[e]){t.next=3;break}return t.abrupt("return",{success:!1,message:"command not found: ".concat(e),commandName:e,args:[],result:null});case 3:return t.abrupt("return",cr[e].run(n.split(" ")));case 4:case"end":return t.stop()}},t)}))}function dr(t,e){var e=1<arguments.length&&void 0!==e&&e,n=new t;return n.init().then(function(){n.initSubCommands()}),cr[(t=n).commandName]=t,e&&lr.push(n),n}function vr(n){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pr(n);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)}))}var mr=["custom","custom2","bookmark"],yr="/System/Commands";function br(n){return new Promise(function(e){var t=document.createElement("script");t.onload=function(){var t=window.CustomCommand;e({result:t,error:""})},t.onerror=function(){e({result:null,error:"error"})},setTimeout(function(){e({result:null,error:"timeout"})},5e3),t.src=n,document.head.appendChild(t)})}function gr(){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vr("cat "+yr);case 2:if((e=t.sent).success)return t.abrupt("return",hn(e.result));t.next=5;break;case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}},t)}))}var wr,xr,kr=function(){c(n,D);var e=s(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).commandName="install",t.desc="Install inner libs or from url",t.hint="custom",t.hintArray=mr,t}return u(n,[{key:"help",get:function(){return this.commandName+" <name|url>"}},{key:"main",value:function(a){return d(this,void 0,void 0,S().mark(function t(){var r,i,o;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(r=a[0]).indexOf("http")&&(e=r,n=void 0,n=0===location.host.indexOf("localhost")?"http://".concat(location.host,"/commands"):"https://cdn.jsdelivr.net/gh/theajack/webos/commands",r="".concat(n,"/").concat(e,".js")),document.querySelector('[src="'.concat(r,'"]')))return t.abrupt("return",this.success("Command ".concat(a[0]," already installed")));t.next=4;break;case 4:return t.next=6,br(r);case 6:if(o=t.sent,i=o.result,o=o.error,i){t.next=11;break}return t.abrupt("return",this.fail("Install command failed: ".concat(o)));case 11:return dr(i,!0),function(n){d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gr();case 2:if(!(e=t.sent)){t.next=7;break}e.push(n),t.next=15;break;case 7:return t.next=9,vr("touch "+yr);case 9:if(!t.sent.success){t.next=14;break}e=[n],t.next=15;break;case 14:return t.abrupt("return");case 15:return t.next=17,En(yr,JSON.stringify(e));case 17:case"end":return t.stop()}},t)}))}(r),t.abrupt("return",this.success());case 14:case"end":return t.stop()}var e,n},t,this)}))}}]),n}(),Sr=null;function Er(){clearTimeout(Sr)}function jr(o){var t=this;Er(),Sr=setTimeout(function(){return d(t,void 0,void 0,S().mark(function t(){var e,n,r,i;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.split(" "),n=p(n,2),e=n[0],n=n[1],e=sr(e),!(n=n?e.subCommands[n]:null)||"object"!==v(n)||3!==o.split(" ").length){t.next=14;break}if(t.t0=n.hintArray,t.t0){t.next=9;break}return t.next=8,Or(o);case 8:t.t0=t.sent;case 9:i=t.t0,r=n.help||(e?e.help:""),N.setHint(r,i),t.next=19;break;case 14:return t.next=16,Or(o);case 16:r=t.sent,i=e?e.help:"",N.setHint(i,r);case 19:Dr();case 20:case"end":return t.stop()}},t)}))},500)}function Or(e){return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Rr(e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))}Cr="history",P=Tn.read(Cr)||[],I=P.length,(Ar=[])[I]="";var Cr,P,I,Ar,Nr={get:function(){var t=Ar[I];return"string"==typeof t?t:P[I]},prev:function(){return 0<I&&I--,this.get()},next:function(){var t=I+1;return(t<P.length||t<Ar.length)&&I++,this.get()},push:function(t){P.push(t),100<P.length&&P.shift(),I=P.length,(Ar=[])[I]="",Tn.write(Cr,P)},oninput:function(t){Ar[I]=t}},_r=i(function(t){var i=t.events,t=O.flex(1).outline("none").backgroundColor("transparent").color("#fff").border("none").join(bn.FontSize).padding(0);return k(k(O.display("flex"),o("#InputTitle",j(w(wr=wr||q(["webos:"," ","$"]),vn,dn)),O.marginRight(10),Ne.stop),xe.model(mn)("#InputInput[spellcheck=false]",t,yn,Oe("keyup")(function(t,e){var n=t.keyCode,r=e.value;switch(n){case 9:i.ontab(r);break;case 13:r&&(Nr.push(r),mn.value="",i.onrun(r)),setTimeout(Dr),t.preventDefault(),N.hideHint();break;default:Nr.oninput(r)}jr(e.value)}),Oe("keydown")(function(t){var e=t.keyCode;[9,13,38,40].includes(e)&&(38!==e&&40!==e||"string"==typeof(e=Nr[38===e?"prev":"next"]())&&(mn.value=e),t.preventDefault())}),Oe("blur")(function(){Er(),N.hideHint()}),Oe("focus")(function(t,e){jr(null==e?void 0:e.value)}),ee(function(t){window.addEventListener("click",function(){t.focus()})}))),k.show(N.enabled)(O.color("#777").marginTop(5),o.show(function(){return!!N.text.value})(j(w(xr=xr||q(["Hint: ",""]),N.text))),k(O.wordBreak("break-word"),o.for(N.list)(function(t){return[O.marginRight(20),j(t)]}))))}),Tr=i(function(t){t=t.props;return k(".InputTitle",O.marginBottom(3),j("webos:".concat(vn.value," ").concat(dn.value,"$ ").concat(t.inputValue.value)))});function Dr(){document.documentElement.scrollTop=document.documentElement.offsetHeight}var Pr=i(function(t){t=t.slots;return k(O.marginBottom(10).wordWrap("break-word"),t)});function Ir(t,e){i(function(){return[Tr(Se({inputValue:t})),Pr(Ee(e))]}).mount(Pn)}function Lr(t,e){Ir(t,k(T.Fail,j(e)))}function Rr(l){var f,h=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return d(this,void 0,void 0,S().mark(function t(){var e,n,r,i,o,a,u,c,s;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1===(e=l.split(" ")).length)return n=e[0],t.abrupt("return",Fr(l,n,hr(),"command",h));t.next=6;break;case 6:if(n=p(e,2),i=n[0],r=n[1],i=sr(i)){t.next=10;break}return t.abrupt("return",[]);case 10:if(o=e[e.length-1],a=o,u=null,c=i.hint,"object"===v(s=i.subCommands[r])?3===e.length&&(s.hint&&(c=s.hint),s.hintArray&&(u=s.hintArray)):(s=Object.keys(i.subCommands),2===e.length&&0<s.length&&(u=s)),u){t.next=32;break}if("none"===c)return t.abrupt("return",[]);t.next=19;break;case 19:if(!(0<(null==(f=i.hintArray)?void 0:f.length)||"custom"===c)){t.next=23;break}u=i.hintArray||[],t.next=32;break;case 23:if("command"!==c){t.next=27;break}u=hr(),t.next=32;break;case 27:if("file"===c)return a=m.from(o).last,t.next=31,function(n){var r;return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=L.CurrentDir.path.join(n||"./").parentPath,t.next=3,L.CurrentDir.findDirByPath(e);case 3:if(t.t2=r=t.sent,t.t1=null===t.t2,t.t1){t.next=7;break}t.t1=void 0===r;case 7:if(!t.t1){t.next=11;break}t.t3=void 0,t.next=12;break;case 11:t.t3=r.lsDetail();case 12:if(t.t0=t.t3,t.t0){t.next=15;break}t.t0=[];case 15:return t.abrupt("return",t.t0);case 16:case"end":return t.stop()}},t)}))}(o);t.next=32;break;case 31:u=t.sent;case 32:return t.abrupt("return",Fr(l,a,u||[],c,h));case 33:case"end":return t.stop()}},t)}))}function Fr(t,e,n,r,i){var o,r=3<arguments.length&&void 0!==r?r:"custom",i=4<arguments.length&&void 0!==i&&i,a="file"===r?function(t){return t.name}:function(t){return t},n=n.filter(function(t){return 0===a(t).indexOf(e)});return i?n.map(function(t){return a(t)}):(0===n.length?Lr(t,"No ".concat(r," found")):1===n.length?(i=-1!==(i=t.lastIndexOf(m.Back))&&i===t.length-m.Back.length?m.Split:"",i=t.substring(0,t.lastIndexOf(e))+i+a(n[0]),"file"===r&&n[0].isDir&&(i+="/"),"file"!==r&&(i+=" "),mn.value=i):(o="file"===r?Fn:Rn,Ir(t,n.map(function(t){return o(t)}))),[])}function Br(t){Ir(t,k(bn.SuccessColor,j("Execute command Success: ".concat(t))))}var zr=i(function(){var t;return[i(In),_r((t={onrun:function(a){return d(void 0,void 0,void 0,S().mark(function t(){var e,n,r,i,o;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pr(a);case 2:if(e=t.sent){t.next=6;break}return Br(a),t.abrupt("return");case 6:if(n=e.commandName,r=e.success,i=e.message,o=e.result,!r){t.next=13;break}if("clear"===n)return t.abrupt("return");t.next=10;break;case 10:o?Ir(a,"string"==typeof o?j(o):o):Br(a),t.next=14;break;case 13:Lr(a,i);case 14:case"end":return t.stop()}},t)}))},ontab:Rr},{type:"event",exe:function(){return t}}))]});function Mr(){return k("#TermApp",k.if(_.enabled)(jn).else(zr))}var Ur=u(function t(e){a(this,t);e="string"==typeof e?document.querySelector(e):e;if(!e)throw new Error("Invalid container");this.container=e,i(Mr).mount(this.container)}),L=function(){function e(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).container,t=void 0===t?"body":t;if(a(this,e),e.instance)return e.instance;this.disk=new at,this.currentDir=this.disk,this.ui=new Ur(t),e.instance=this}return u(e,[{key:"init",value:function(){return d(this,void 0,void 0,S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.disk.initFileSystem();case 2:fr(),!function(){d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gr();case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Promise.all(e.map(br));case 7:t.sent.forEach(function(t){t.result&&dr(t.result,!0)});case 9:case"end":return t.stop()}},t)}))}();case 4:case"end":return t.stop()}},t,this)}))}}],[{key:"CurrentDir",get:function(){return this.instance.currentDir},set:function(t){this.instance.currentDir=t}},{key:"CurrentPath",get:function(){return this.CurrentDir.path.path}},{key:"Disk",get:function(){return this.instance.disk}}]),e}();return L.execute=vr,R.Term=L,R.createTerm=function(n){return d(this,void 0,void 0,S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(L.instance)return t.abrupt("return",L.instance);t.next=2;break;case 2:return e=new L(n),t.next=5,e.init();case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}},t)}))},Object.defineProperty(R,"__esModule",{value:!0}),R}({});


WebosTerm.createTerm({
  container: 'body'
});